---
# yaml-language-server: $schema=https://raw.githubusercontent.com/yannh/kubernetes-json-schema/master/v1.29.0-standalone-strict/configmap-v1.json
apiVersion: v1
kind: ConfigMap
metadata:
  name: authentik-custom-css
  namespace: authentik
data:
  custom.css: |
    /* Custom CSS for Authentik Login Page and Admin Interface */
    /* Updated for Authentik 2025.12.0 with shadow DOM support */

    :root {
      --ak-accent: #3a3a40;
      --pf-global--primary-color--100: #3a3a40;
      --pf-global--primary-color--200: #3a3a40;
      --pf-global--primary-color--400: var(--ak-accent);
    }

    /*** Main login page using ::part() selectors for shadow DOM ***/
    ak-flow-executor::part(main) {
      background-color: transparent !important;
      backdrop-filter: blur(8px);
      border: 2px solid #807e82;
      border-radius: 25px;
      animation: pulse-border 3s infinite;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
      box-sizing: border-box;
    }

    /* Glowing border animation */
    @keyframes pulse-border {
      0%, 100% {
        box-shadow: 0 0 10px #807e82, 0 0 15px #807e82, inset 0 0 10px rgba(128, 126, 130, 0.1);
      }
      50% {
        box-shadow: 0 0 15px #807e82, 0 0 25px #807e82, inset 0 0 15px rgba(128, 126, 130, 0.2);
      }
    }

    /* Branding styling */
    ak-flow-executor::part(branding) {
      margin-bottom: 1.5rem;
    }

    ak-flow-executor::part(branding) img {
      max-width: 150px;
      height: auto;
      filter: drop-shadow(0 0 10px rgba(128, 126, 130, 0.3));
    }

    /* Stage identification card styling */
    ak-stage-identification::part(flow-card) {
      background: rgba(30, 30, 30, 0.4) !important;
      backdrop-filter: blur(10px) !important;
      border: 1px solid rgba(128, 126, 130, 0.3) !important;
      border-radius: 20px !important;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
      padding: 2rem !important;
      width: 100%;
      max-width: 400px;
    }

    /* Text inputs styling */
    ak-stage-identification::part(flow-card) input[type="text"],
    ak-stage-identification::part(flow-card) input[type="password"],
    ak-stage-identification::part(flow-card) input[type="email"] {
      border-radius: 15px !important;
      border: 2px solid #807e82 !important;
      background-color: rgba(58, 58, 64, 0.3) !important;
      color: #b7b7b7 !important;
      padding: 10px 15px !important;
      transition: all 0.3s ease !important;
    }

    ak-stage-identification::part(flow-card) input:focus {
      border-color: #d6d6d6 !important;
      box-shadow: 0 0 10px rgba(214, 214, 214, 0.3) !important;
      background-color: rgba(58, 58, 64, 0.5) !important;
    }

    /* Login button styling */
    ak-stage-identification::part(flow-card) button[type="submit"] {
      background-color: #3a3a40 !important;
      color: white !important;
      border-radius: 15px !important;
      border: none !important;
      padding: 12px 30px !important;
      font-weight: 600 !important;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3) !important;
      transition: all 0.3s ease !important;
      cursor: pointer !important;
    }

    ak-stage-identification::part(flow-card) button[type="submit"]:hover {
      background-color: #4a4a50 !important;
      box-shadow: 0 6px 20px rgba(128, 126, 130, 0.4) !important;
    }

    ak-stage-identification::part(flow-card) button[type="submit"]:active {
      transform: scale(0.98) !important;
    }

    /* Other buttons styling */
    ak-stage-identification::part(source-item) {
      border-radius: 12px !important;
      border: 1px solid rgba(128, 126, 130, 0.3) !important;
      background: rgba(30, 30, 30, 0.3) !important;
      transition: all 0.3s ease !important;
      padding: 8px 12px !important;
    }

    ak-stage-identification::part(source-item):hover {
      background: rgba(58, 58, 64, 0.5) !important;
      border-color: #807e82 !important;
      box-shadow: 0 4px 12px rgba(128, 126, 130, 0.2) !important;
    }

    /* Text styling */
    ak-flow-executor {
      --ak-text-color: #b7b7b7;
      color: #b7b7b7;
    }

    ak-stage-identification::part(flow-card) label,
    ak-stage-identification::part(flow-card) span,
    ak-stage-identification::part(flow-card) a {
      color: #b7b7b7 !important;
    }

    ak-stage-identification::part(flow-card) a {
      text-decoration: none;
      border-bottom: 1px solid #3a3a40;
      transition: all 0.3s ease;
    }

    ak-stage-identification::part(flow-card) a:hover {
      color: #d6d6d6 !important;
      border-bottom-color: #d6d6d6;
    }

    /* Footer styling */
    ak-stage-identification::part(challenge-footer-band) {
      background-color: transparent !important;
      border-top: 1px solid rgba(128, 126, 130, 0.2) !important;
      margin-top: 1.5rem !important;
      padding-top: 1.5rem !important;
    }

    ak-stage-identification::part(challenge-additional-actions) {
      background-color: transparent !important;
    }

    /* Admin interface - fallback for non-shadow DOM elements */
    .pf-c-page {
      background-color: transparent !important;
    }

    .pf-c-page__sidebar {
      backdrop-filter: blur(10px);
      background-color: rgba(30, 30, 30, 0.4) !important;
    }

    .pf-c-card,
    .pf-c-expandable-section {
      background: rgba(30, 30, 30, 0.4) !important;
      backdrop-filter: blur(7px);
      border: 1px solid rgba(128, 126, 130, 0.2) !important;
      border-radius: 15px !important;
    }

    .pf-c-card:hover,
    .pf-c-expandable-section:hover {
      box-shadow: 0 0 15px 3px rgba(214, 214, 214, 0.1) !important;
    }
